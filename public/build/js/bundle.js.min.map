{"version":3,"sources":["app.js","modernizr.js"],"names":["iniciarApp","document","querySelector","cargarResultados","cargarDepartamentos","mostrarModal","getElementById","loadProgress","filterResult","filtroEncuestaClima","deptoClave","selectDepto","addEventListener","this","setupDownloadButton","link","createElement","href","download","click","selectElement","claveDepto","options","selectedIndex","getAttribute","value","modal","spanClose","querySelectorAll","forEach","boton","event","preventDefault","style","display","onclick","closest","submit","async","selectPeriodo","selectDepartamento","encabezadoTabla","propiedadId","actualizarResultados","periodoSeleccionado","departamentoSeleccionado","propiedadActual","url","location","origin","encodeURIComponent","respuesta","fetch","data","esResultadosGenerales","tbody","innerHTML","textContent","Array","from","map","span","console","log","dataset","clavedepto","periodos_id","nombreDepartamento","nombredepartamento","departamento","resultadoActual","resultadosFiltrados","find","r","departamentos_id","toString","resultadoPrevio","promedioActual","Object","keys","length","calcularPromedio","promedioAnterior","diferencia","parseFloat","toFixed","fila","classList","add","determinarClasePorCalificacion","determinarClasePorDiferencia","appendChild","preguntas","pregunta","diferenciaPromedio","filaPromedio","index","valorActual","valorPrevio","rellenarTabla","json","error","resultados","suma","conteo","i","valor","isNaN","calificacion","urlDepartamentos","urlPeriodos","responseDepartamentos","responsePeriodos","dataDepartamentos","dataPeriodos","departamentos","propiedadSelect","periodos","departamentoSelect","periodoInput","llenarDepartamentos","propiedadSeleccionada","filter","propiedades_id","option","element","porcentaje","width","inputPlanAC","departamentoIdInput","periodoIdInput","inputDepartamento","inputPeriodo","inputDepartamento1","inputPeriodo1","periodoPropiedadInput","dashboardContenedor","dashboardContenedor1","cuestionarioDiv","departamentosDiv","actualizarContenido","departamentosFiltrados","sort","a","b","setAttribute","desplegarDepartamentos","preguntasFiltradas","idperiodo","id","idpropiedades","desplegarPreguntas","actualizarInputs","resultadosContainer","getElementsByTagName","selectedDepartamentoId","selectedPeriodoId","actualizarVisibilidadContenedor","periodoId","departamentoId","selectedPeriodo","selectedPropiedadId","propiedad","periodosMismaPropiedad","ultimoPeriodoMismaPropiedad","esUltimoPeriodo","$","ajax","method","periodo","success","response","JSON","parse","planAC","preguntasResponse","preguntasData","departamentosResponse","departamentosData","cargarDatos","then","optionRG","catch","actualizarDepartamentos","dataType","fetchPlanAC","$btnExportar","$tabla","tableExport","TableExport","exportButtons","filename","sheetname","preferenciasDocumento","getExportData","tabla_resultados","xlsx","export2file","mimeType","fileExtension","merges","RTL","preguntasUrl","periodosUrl","periodosResponse","Promise","all","ok","Error","periodosData","periodoSelect","propiedadesInput","periodosFiltrados","ultimoPeriodo","reduce","max","Date","join","actualizarPeriodos","dispatchEvent","Event","header","getFullYear","div","p","idResultado","opcionesHTML","opcion","every","radio","nombrePregunta","name","alert","formData","FormData","body","window","e","n","A","o","u","className","Modernizr","_config","classPrefix","c","baseVal","enableJSClass","RegExp","replace","enableClasses","f","toLowerCase","split","t","Boolean","_trigger","s","l","_version","usePrefixes","_q","on","setTimeout","addTest","push","fn","addAsyncTest","prototype","documentElement","nodeName","hasOwnProperty","call","constructor","_l","type","Image","onerror","onload","src","uri","shift","aliases"],"mappings":"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","file":"bundle.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp() {\r\n    // IFFIE para la vista de Resultados\r\n \r\n    (function () {\r\n        const periodoInput = document.querySelector('#selectPeriodo');\r\n\r\n        if (periodoInput) {\r\n            cargarResultados();\r\n        }\r\n    })();\r\n\r\n    // IFFIE para la vista de encuesta\r\n  \r\n    (function () {\r\n        const departamentosInput = document.querySelector('#departamento');\r\n\r\n        if (departamentosInput) {\r\n            cargarDepartamentos();\r\n        }\r\n    })();\r\n\r\n    // IFFIE para modal\r\n \r\n    (function () {\r\n        const eliminarInput = document.querySelector('#modalConfirmacion');\r\n\r\n        if (eliminarInput) {\r\n            mostrarModal();\r\n        }\r\n    })();\r\n\r\n \r\n    (function () {\r\n        const progress = document.getElementById('progress_dashboard');\r\n        if (progress) {\r\n            loadProgress();\r\n        }\r\n    })();\r\n\r\n   \r\n    (function () {\r\n        const results = document.getElementById('filtro_resultados');\r\n        if (results) {\r\n            filterResult();\r\n        }\r\n    }\r\n    )();\r\n\r\n   \r\n    (function () {\r\n        const filtroEnc = document.getElementById('filtroEncuesta');\r\n        if (filtroEnc) {\r\n            filtroEncuestaClima();\r\n        }\r\n    })();\r\n\r\n   \r\n    (function () {\r\n        const clave = document.getElementById('clave_depto');\r\n        if (clave) {\r\n            deptoClave();\r\n        }\r\n    }\r\n    )();\r\n\r\n    \r\n    (function () {\r\n        // Obtén el elemento select\r\n        const selectDepto = document.getElementById('nombreDepartamento');\r\n        \r\n        if (selectDepto) {\r\n            // Escucha el evento change\r\n            selectDepto.addEventListener('change', function () {\r\n                deptoClave(this); // Llama a la función con el select actual\r\n            });\r\n        }\r\n        \r\n    }\r\n    )();\r\n\r\n    (function () {\r\n        const btnDescargar = document.getElementById('btnDescargar');\r\n        if (btnDescargar) {\r\n            setupDownloadButton();\r\n        }\r\n    })();\r\n    \r\n}\r\n\r\nfunction setupDownloadButton() {\r\n    const btnDescargar = document.getElementById('btnDescargar');\r\n    btnDescargar.addEventListener('click', function () {\r\n        const link = document.createElement('a');\r\n        link.href = 'https://miclima.mimundodigital.mx/Archivos/Plan%20de%20c,%20ac%20y%20m%20-%20Mundo%20Imperial.xlsx'; // URL del archivo\r\n        link.download = 'Plan de c, ac y m - Mundo Imperial.xlsx'; // Nombre con el que se descargará el archivo\r\n        link.click(); // Simula el clic en el enlace para descargar\r\n    });\r\n}\r\n\r\n\r\nfunction deptoClave(selectElement) {\r\n    // Obtener el valor del atributo 'data-clave' del departamento seleccionado\r\n    const claveDepto = selectElement.options[selectElement.selectedIndex].getAttribute('data-clave');\r\n    \r\n    // Actualizar el campo 'claveDepto' con la clave obtenida\r\n    document.getElementById('claveDepto').value = claveDepto;\r\n}\r\n\r\n\r\n\r\nfunction mostrarModal() {\r\n    const modal = document.getElementById('modalConfirmacion');\r\n    const spanClose = modal.querySelector('.close');\r\n\r\n    document.querySelectorAll('.table__accion--eliminar').forEach(boton => {\r\n        boton.addEventListener('click', function (event) {\r\n            event.preventDefault();\r\n            modal.style.display = \"block\";\r\n\r\n            const confirmar = document.getElementById('confirmarEliminar');\r\n            confirmar.onclick = () => {\r\n                // Aquí envías el formulario de eliminación\r\n                this.closest('form').submit();\r\n            };\r\n\r\n            const cancelar = document.getElementById('cancelarEliminar');\r\n            cancelar.onclick = () => {\r\n                modal.style.display = \"none\";\r\n            };\r\n        });\r\n    });\r\n\r\n    // Event listener para cerrar el modal con el botón de cierre (X)\r\n    if (spanClose) {\r\n        spanClose.addEventListener('click', function () {\r\n            modal.style.display = 'none';\r\n        });\r\n    }\r\n}\r\n\r\n\r\nasync function cargarResultados() {\r\n    const selectPeriodo = document.getElementById('selectPeriodo');\r\n    const selectDepartamento = document.getElementById('selectDepartamento');\r\n    const encabezadoTabla = document.getElementById('primer-encabezado');\r\n    const propiedadId = document.getElementById('propiedadActual');\r\n\r\n    async function actualizarResultados() {\r\n        const periodoSeleccionado = selectPeriodo.value;\r\n        const departamentoSeleccionado = selectDepartamento.value;\r\n        const propiedadActual = propiedadId.value;\r\n\r\n        if (periodoSeleccionado && departamentoSeleccionado) {\r\n            try {\r\n                const url = `${location.origin}/resultados/api?periodos_id=${encodeURIComponent(periodoSeleccionado)}&departamentos_id=${encodeURIComponent(departamentoSeleccionado)}&idpropiedades=${encodeURIComponent(propiedadActual)}`;\r\n                const respuesta = await fetch(url);\r\n                const data = await respuesta.json();\r\n\r\n                rellenarTabla(data, departamentoSeleccionado === 'RG');\r\n            } catch (error) {\r\n                console.error('Error al cargar los resultados:', error);\r\n            }\r\n        }\r\n    }\r\n\r\n    function calcularPromedio(resultados) {\r\n        let suma = 0;\r\n        let conteo = 0;\r\n        for (let i = 1; i <= 16; i++) {\r\n            const valor = parseFloat(resultados['cp' + i]);\r\n            if (!isNaN(valor)) {\r\n                suma += valor;\r\n                conteo++;\r\n            }\r\n        }\r\n        return conteo > 0 ? (suma / conteo).toFixed(2) : 'N/A';\r\n    }\r\n\r\n    function determinarClasePorCalificacion(calificacion) {\r\n        if (calificacion >= 85) {\r\n            return 'calificacion-verde';\r\n        } else if (calificacion >= 80) {\r\n            return 'calificacion-amarillo';\r\n        } else {\r\n            return 'calificacion-rojo';\r\n        }\r\n    }\r\n\r\n    function determinarClasePorDiferencia(diferencia) {\r\n        if (diferencia === 'N/A' || diferencia === '0.00') {\r\n            return '';\r\n        }\r\n\r\n        const diff = parseFloat(diferencia);\r\n        return diff > 0 ? 'calificacion-verde' : 'calificacion-rojo';\r\n    }\r\n\r\n    function rellenarTabla(data, esResultadosGenerales) {\r\n        const tbody = document.querySelector('.table__tbody');\r\n        tbody.innerHTML = '';\r\n        encabezadoTabla.textContent = esResultadosGenerales ? 'Departamento' : 'Pregunta';\r\n\r\n        if (!esResultadosGenerales) {\r\n            const preguntas = Array.from(document.querySelectorAll('#preguntas-container span')).map(span => span.dataset.pregunta);\r\n            const resultadosFiltrados = data.resultadosFiltrados.length > 0 ? data.resultadosFiltrados[0] : null;\r\n            const resultadoPrevio = data.resultadoPrevio || {};\r\n\r\n            const promedioActual = resultadosFiltrados ? calcularPromedio(resultadosFiltrados) : 'N/A';\r\n            const promedioAnterior = resultadoPrevio ? calcularPromedio(resultadoPrevio) : 'N/A';\r\n            const diferenciaPromedio = promedioAnterior !== 'N/A' ? (parseFloat(promedioActual) - parseFloat(promedioAnterior)).toFixed(2) : 'N/A';\r\n\r\n            const filaPromedio = document.createElement('tr');\r\n            filaPromedio.classList.add('table__tr');\r\n            filaPromedio.innerHTML = `\r\n                <td class=\"table__td-pregunta\"></td>\r\n                <td class=\"table__td ${determinarClasePorCalificacion(promedioActual)}\">${promedioActual !== 'N/A' ? promedioActual + '%' : 'N/A'}</td>\r\n                <td class=\"table__td ${determinarClasePorDiferencia(diferenciaPromedio)}\">${diferenciaPromedio !== 'N/A' ? diferenciaPromedio + '%' : 'N/A'}</td>\r\n                <td class=\"table__td ${determinarClasePorCalificacion(promedioAnterior)}\">${promedioAnterior !== 'N/A' ? promedioAnterior + '%' : 'N/A'}</td>\r\n            `;\r\n            tbody.appendChild(filaPromedio);\r\n\r\n            preguntas.forEach((pregunta, index) => {\r\n                const valorActual = resultadosFiltrados ? parseFloat(resultadosFiltrados['cp' + (index + 1)]) : 'N/A';\r\n                const valorPrevio = resultadoPrevio['cp' + (index + 1)] ? parseFloat(resultadoPrevio['cp' + (index + 1)]) : 'N/A';\r\n                const diferencia = valorActual !== 'N/A' && valorPrevio !== 'N/A' ? (valorActual - valorPrevio).toFixed(2) : 'N/A';\r\n\r\n                const fila = document.createElement('tr');\r\n                fila.classList.add('table__tr');\r\n                fila.innerHTML = `\r\n                    <td class=\"table__td-pregunta\">${pregunta}</td>\r\n                    <td class=\"table__td ${determinarClasePorCalificacion(valorActual)}\">${valorActual !== 'N/A' ? valorActual + '%' : 'N/A'}</td>\r\n                    <td class=\"table__td ${determinarClasePorDiferencia(diferencia)}\">${diferencia !== 'N/A' ? diferencia + '%' : 'N/A'}</td>\r\n                    <td class=\"table__td ${determinarClasePorCalificacion(valorPrevio)}\">${valorPrevio !== 'N/A' ? valorPrevio + '%' : 'N/A'}</td>\r\n                `;\r\n                tbody.appendChild(fila);\r\n            });\r\n        } else {\r\n            // Mapear los departamentos del div oculto\r\n            const departamentos = Array.from(document.querySelectorAll('#departamentos-container span')).map(span => {\r\n                console.log(span.dataset)\r\n                return {\r\n                    claveDepto: span.dataset.clavedepto,\r\n                    periodos_id: span.dataset.periodos_id,\r\n                    nombreDepartamento: span.dataset.nombredepartamento\r\n                };\r\n            });\r\n\r\n            // Iterar sobre cada departamento para crear las filas de la tabla\r\n            departamentos.forEach(departamento => {\r\n                // Buscar los resultados correspondientes al departamento actual\r\n                const resultadoActual = data.resultadosFiltrados.find(r => r.departamentos_id.toString() === departamento.claveDepto) || {};\r\n                const resultadoPrevio = data.resultadoPrevio.find(r => r.departamentos_id.toString() === departamento.claveDepto) || {};\r\n\r\n                // Calcular promedios y diferencia\r\n                const promedioActual = Object.keys(resultadoActual).length ? calcularPromedio(resultadoActual) : 'N/A';\r\n                const promedioAnterior = (resultadoPrevio.departamentos_id === 'N/A') ? 'N/A' : (Object.keys(resultadoPrevio).length ? calcularPromedio(resultadoPrevio) : 'N/A');\r\n                const diferencia = (promedioAnterior !== 'N/A' && promedioActual !== 'N/A') ? (parseFloat(promedioActual) - parseFloat(promedioAnterior)).toFixed(2) : 'N/A';\r\n\r\n                // Crear y añadir la fila a la tabla\r\n                const fila = document.createElement('tr');\r\n                fila.classList.add('table__tr');\r\n                fila.innerHTML = `\r\n                    <td class=\"table__td-pregunta\">${departamento.nombreDepartamento}</td>\r\n                    <td class=\"table__td ${determinarClasePorCalificacion(promedioActual)}\">${promedioActual}%</td>\r\n                    <td class=\"table__td ${determinarClasePorDiferencia(diferencia)}\">${diferencia}%</td>\r\n                    <td class=\"table__td ${determinarClasePorCalificacion(promedioAnterior)}\">${promedioAnterior}%</td>\r\n                `;\r\n                tbody.appendChild(fila);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    selectPeriodo.addEventListener('change', actualizarResultados);\r\n    selectDepartamento.addEventListener('change', actualizarResultados);\r\n}\r\n\r\n\r\nasync function cargarDepartamentos() {\r\n    try {\r\n        const urlDepartamentos = `${location.origin}/encuesta/api`;\r\n        const urlPeriodos = `${location.origin}/encuesta/periodos`;\r\n\r\n        const responseDepartamentos = await fetch(urlDepartamentos);\r\n        const responsePeriodos = await fetch(urlPeriodos);\r\n\r\n        const dataDepartamentos = await responseDepartamentos.json();\r\n        const dataPeriodos = await responsePeriodos.json();\r\n\r\n        const departamentos = dataDepartamentos.departamentos; // Lista de departamentos\r\n        const periodos = dataPeriodos.periodos; // Lista de periodos\r\n\r\n        const propiedadSelect = document.getElementById('propiedad');\r\n        const departamentoSelect = document.getElementById('departamento');\r\n        const periodoInput = document.getElementById('periodo'); // Input oculto para el periodo\r\n\r\n        // Función para llenar el select de departamentos\r\n        function llenarDepartamentos() {\r\n            const propiedadSeleccionada = propiedadSelect.value;\r\n            const periodoSeleccionado = periodoInput.value;\r\n\r\n            // Limpiar el select de departamentos\r\n            departamentoSelect.innerHTML = '<option value=\"\">-- Seleccione --</option>';\r\n\r\n            if (!propiedadSeleccionada || !periodoSeleccionado) {\r\n                return; // Salir si no hay propiedad o periodo seleccionado\r\n            }\r\n\r\n            const departamentosFiltrados = departamentos.filter(departamento =>\r\n                departamento.propiedades_id == propiedadSeleccionada &&\r\n                departamento.periodos_id == periodoSeleccionado\r\n            );\r\n\r\n            departamentosFiltrados.forEach(departamento => {\r\n                const option = document.createElement('option');\r\n                option.value = departamento.claveDepto;\r\n                option.textContent = departamento.nombreDepartamento;\r\n                departamentoSelect.appendChild(option);\r\n            });\r\n        }\r\n\r\n        // Evento para actualizar departamentos cuando cambia la propiedad\r\n        propiedadSelect.addEventListener('change', llenarDepartamentos);\r\n\r\n        // Inicializar con los valores por defecto\r\n        llenarDepartamentos();\r\n\r\n    } catch (error) {\r\n        console.error('Error al cargar datos:', error);\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction loadProgress() {\r\n    document.querySelectorAll('.table__progreso').forEach(function (element) {\r\n        const porcentaje = element.getAttribute('data-porcentaje');\r\n        element.style.width = porcentaje + '%';\r\n    })\r\n\r\n}\r\n\r\nconst filterResult = async() => {\r\n    const selectPeriodo = document.getElementById('selectPeriodo');\r\n    const selectDepartamento = document.getElementById('selectDepartamento');\r\n    const inputPlanAC = document.getElementById('planAC');\r\n    const departamentoIdInput = document.getElementById('dep');\r\n    const periodoIdInput = document.getElementById('per');\r\n    const inputDepartamento = document.getElementById('depar');\r\n    const inputPeriodo = document.getElementById('perio');\r\n    const inputDepartamento1 = document.getElementById('dep1');\r\n    const inputPeriodo1 = document.getElementById('per1');\r\n    const periodoPropiedadInput = document.getElementById('perpro');\r\n    const periodoPropiedad2Input = document.getElementById('perpro2');\r\n    const dashboardContenedor = document.getElementById('dashboardContenedor');\r\n    const dashboardContenedor1 = document.getElementById('dashboardContenedor1');\r\n\r\n    const cuestionarioDiv = document.getElementById('preguntas-container');\r\n    const departamentosDiv = document.getElementById('departamentos-container');\r\n    let preguntas;\r\n    let departamentos;\r\n    dashboardContenedor.style.display = 'none';\r\n        dashboardContenedor1.style.display = 'none';\r\n    function actualizarContenido() {\r\n        const periodoSeleccionado = selectPeriodo.value;\r\n        const departamentoSeleccionado = selectDepartamento.value;\r\n\r\n        if (!periodoSeleccionado) {\r\n            cuestionarioDiv.style.display = \"none\";\r\n            departamentosDiv.style.display = \"none\";\r\n            return;\r\n        }\r\n\r\n        if (departamentoSeleccionado === 'RG') {\r\n            desplegarDepartamentos();\r\n            cuestionarioDiv.style.display = \"none\";\r\n        } else if (departamentoSeleccionado !== '') {\r\n            desplegarPreguntas();\r\n            departamentosDiv.style.display = \"none\";\r\n        } else {\r\n            cuestionarioDiv.style.display = \"none\";\r\n            departamentosDiv.style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    function desplegarPreguntas() {\r\n        const periodoSeleccionado = selectPeriodo.value;\r\n        if (!periodoSeleccionado) return;\r\n\r\n        cuestionarioDiv.innerHTML = '';\r\n        const preguntasFiltradas = preguntas.filter(pregunta => pregunta.idperiodo == periodoSeleccionado);\r\n        preguntasFiltradas.forEach(pregunta => {\r\n            const span = document.createElement('span');\r\n            span.dataset.id = pregunta.id;\r\n            span.dataset.idpropiedades = pregunta.idpropiedades;\r\n            span.dataset.idperiodo = pregunta.idperiodo;\r\n            span.dataset.pregunta = pregunta.pregunta;\r\n            cuestionarioDiv.appendChild(span);\r\n        });\r\n        cuestionarioDiv.style.display = preguntasFiltradas.length > 0 ? \"block\" : \"none\";\r\n    }\r\n\r\n    function desplegarDepartamentos() {\r\n        const periodoSeleccionado = selectPeriodo.value;\r\n        if (!periodoSeleccionado) return;\r\n    \r\n        departamentosDiv.innerHTML = '';\r\n        \r\n        // Filtramos los departamentos por periodo\r\n        const departamentosFiltrados = departamentos.filter(departamento => departamento.periodos_id == periodoSeleccionado);\r\n    \r\n        // Ordenamos los departamentos por claveDepto\r\n        departamentosFiltrados.sort((a, b) => {\r\n            if (a.claveDepto < b.claveDepto) {\r\n                return -1;\r\n            }\r\n            if (a.claveDepto > b.claveDepto) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n    \r\n        // Creamos los elementos DOM para los departamentos\r\n        departamentosFiltrados.forEach(departamento => {\r\n            const span = document.createElement('span');\r\n            span.setAttribute('data-claveDepto', departamento.claveDepto);\r\n            span.setAttribute('data-periodos_id', departamento.periodos_id);\r\n            span.setAttribute('data-nombreDepartamento', departamento.nombreDepartamento);\r\n            departamentosDiv.appendChild(span);\r\n        });\r\n    \r\n        // Mostramos u ocultamos el contenedor dependiendo de si hay departamentos\r\n        departamentosDiv.style.display = departamentosFiltrados.length > 0 ? \"block\" : \"none\";\r\n    }\r\n\r\n    function fetchPlanAC() {\r\n        const periodoId = selectPeriodo.value;\r\n        const departamentoId = selectDepartamento.value;\r\n\r\n        if (periodoId && departamentoId) {\r\n            // Realiza la solicitud AJAX para obtener el PlanAC\r\n            $.ajax({\r\n                url: '/verificar-plan',\r\n                method: 'POST',\r\n                data: {\r\n                    periodo: periodoId,\r\n                    departamento: departamentoId\r\n                },\r\n                dataType: 'json',\r\n                success: function(response) {\r\n                    if (response.planAC === null || response.planAC === '' || response.planAC === 'NULL') {\r\n                        inputPlanAC.value = 'NULL';\r\n                    } else {\r\n                        inputPlanAC.value = response.planAC;\r\n                    }\r\n                },\r\n                error: function() {\r\n                    inputPlanAC.value = 'Error al obtener el PlanAC';\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    function actualizarInputs() {\r\n        const resultadosContainer = document.getElementById('tabla_resultados').getElementsByTagName('tbody')[0];\r\n        const selectedDepartamentoId = selectDepartamento.value;\r\n        const selectedPeriodoId = selectPeriodo.value;\r\n        departamentoIdInput.value = selectedDepartamentoId;\r\n        inputDepartamento.value = selectedDepartamentoId;\r\n        inputDepartamento1.value = selectedDepartamentoId;\r\n\r\n        periodoIdInput.value = selectedPeriodoId;\r\n        inputPeriodo.value = selectedPeriodoId;\r\n        inputPeriodo1.value = selectedPeriodoId;\r\n\r\n        const selectedOption = selectPeriodo.options[selectPeriodo.selectedIndex];\r\n        const propiedadId = selectedOption.getAttribute('data-propiedad');\r\n        periodoPropiedadInput.value = propiedadId;\r\n        // periodoPropiedad2Input.value = propiedadId;\r\n\r\n        resultadosContainer.innerHTML = ''; // Limpiar resultados\r\n    }\r\n\r\n    function esUltimoPeriodo() {\r\n        const selectedPeriodo = selectPeriodo.options[selectPeriodo.selectedIndex];\r\n        const selectedPeriodoId = selectedPeriodo.value;\r\n        const selectedPropiedadId = selectedPeriodo.dataset.propiedad;\r\n        const periodosMismaPropiedad = Array.from(selectPeriodo.options).filter(option => option.dataset.propiedad === selectedPropiedadId);\r\n        const ultimoPeriodoMismaPropiedad = periodosMismaPropiedad[periodosMismaPropiedad.length - 1];\r\n\r\n        return ultimoPeriodoMismaPropiedad && ultimoPeriodoMismaPropiedad.value === selectedPeriodoId;\r\n    }\r\n\r\n    function limpiarContenedores() {\r\n        dashboardContenedor.style.display = 'none';\r\n        dashboardContenedor1.style.display = 'none';\r\n    }\r\n\r\n    function actualizarVisibilidadContenedor() {\r\n        const periodoId = selectPeriodo.value;\r\n        const departamentoId = selectDepartamento.value;\r\n\r\n        if (departamentoId === 'RG') {\r\n            dashboardContenedor.style.display = 'none';\r\n            dashboardContenedor1.style.display = 'none';\r\n            return;\r\n        }\r\n\r\n        if (periodoId && departamentoId) {\r\n            if (esUltimoPeriodo()) {\r\n                $.ajax({\r\n                    url: '/verificar-plan', // Ajusta esta URL a la de tu endpoint\r\n                    method: 'POST',\r\n                    data: {\r\n                        periodo: periodoId,\r\n                        departamento: departamentoId\r\n                    },\r\n                    success: function(response) {\r\n                        const data = typeof response === 'string' ? JSON.parse(response) : response;\r\n\r\n                            if (data.planAC === 'NULL' || data.planAC === null || data.planAC === '') {\r\n                                dashboardContenedor.style.display = 'block';\r\n                                dashboardContenedor1.style.display = 'none';\r\n                            } else {\r\n                                dashboardContenedor.style.display = 'none';\r\n                                dashboardContenedor1.style.display = 'block';\r\n                            }     \r\n                        \r\n                    },\r\n                    error: function() {\r\n                        console.error('Error al verificar PlanAC en la base de datos.');\r\n                    }\r\n                });\r\n            } else {\r\n                dashboardContenedor.style.display = 'none';\r\n                dashboardContenedor1.style.display = 'block';\r\n            }\r\n        } \r\n    }\r\n \r\n    function actualizarDepartamentos() {\r\n        const periodoId = selectPeriodo.value;\r\n        selectDepartamento.innerHTML = '<option selected value=\"\">-- Departamento --</option>';\r\n    \r\n        if (periodoId) {\r\n            fetch(`/obtenerdepto?periodos_id=${periodoId}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    // Ordenar los departamentos por claveDepto\r\n                    const departamentosOrdenados = data.departamentos.sort((a, b) => {\r\n                        if (a.claveDepto < b.claveDepto) return -1;\r\n                        if (a.claveDepto > b.claveDepto) return 1;\r\n                        return 0;\r\n                    });\r\n    \r\n                    // Agregar los departamentos al select\r\n                    departamentosOrdenados.forEach(departamento => {\r\n                        const option = document.createElement('option');\r\n                        option.value = departamento.claveDepto;\r\n                        option.textContent = departamento.nombreDepartamento;\r\n                        selectDepartamento.appendChild(option);\r\n                    });\r\n    \r\n                    // Agregar opción \"Resultados Generales\" al final\r\n                    const optionRG = document.createElement('option');\r\n                    optionRG.value = 'RG';\r\n                    optionRG.textContent = 'Resultados Generales';\r\n                    selectDepartamento.appendChild(optionRG);\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error al obtener los departamentos:', error);\r\n                });\r\n        }\r\n    }\r\n    \r\n    async function cargarDatos() {\r\n        try {\r\n            const preguntasResponse = await fetch(`${location.origin}/resultados/index`);\r\n            const preguntasData = await preguntasResponse.json();\r\n            const departamentosResponse = await fetch(`${location.origin}/resultados/departamentos`);\r\n            const departamentosData = await departamentosResponse.json();\r\n\r\n            preguntas = preguntasData.preguntas;\r\n            departamentos = departamentosData.departamentos;\r\n        } catch (error) {\r\n            console.error('Error al cargar datos');\r\n        }\r\n    }\r\n    \r\n    // Inicializa los datos\r\n       function manejarCambios() {\r\n        fetchPlanAC();\r\n        actualizarVisibilidadContenedor();\r\n        actualizarInputs();\r\n        actualizarContenido();\r\n    }\r\n    async function managePeriodo(){\r\n        await cargarDatos();\r\n        actualizarDepartamentos();\r\n        actualizarInputs();\r\n        limpiarContenedores();\r\n    }\r\n    selectPeriodo.addEventListener('change', managePeriodo);\r\n    selectDepartamento.addEventListener('change', manejarCambios);\r\n\r\n    const $btnExportar = document.querySelector(\"#btnExportar\"),\r\n    $tabla = document.querySelector(\"#tabla_resultados\");\r\n\r\n$btnExportar.addEventListener(\"click\", function() {\r\n    let tableExport = new TableExport($tabla, {\r\n        exportButtons: false, // No queremos botones\r\n        filename: \"Reporte MiClima\", //Nombre del archivo de Excel\r\n        sheetname: \"Reporte MiClima\", //Título de la hoja\r\n    });\r\n    let datos = tableExport.getExportData();\r\n    let preferenciasDocumento = datos.tabla_resultados.xlsx;\r\n    tableExport.export2file(preferenciasDocumento.data, preferenciasDocumento.mimeType, preferenciasDocumento.filename, preferenciasDocumento.fileExtension, preferenciasDocumento.merges, preferenciasDocumento.RTL, preferenciasDocumento.sheetname);\r\n});\r\n\r\n\r\n}\r\n\r\n\r\nfunction filtroEncuestaClima() {\r\n    cargarDatos();\r\n\r\n    async function cargarDatos() {\r\n        try {\r\n            const preguntasUrl = `${location.origin}/encuesta/preguntas`;\r\n            const periodosUrl = `${location.origin}/encuesta/periodos`;\r\n\r\n            const [preguntasResponse, periodosResponse] = await Promise.all([\r\n                fetch(preguntasUrl),\r\n                fetch(periodosUrl)\r\n            ]);\r\n\r\n            if (!preguntasResponse.ok || !periodosResponse.ok) {\r\n                throw new Error('Network response was not ok');\r\n            }\r\n\r\n            const preguntasData = await preguntasResponse.json();\r\n            const periodosData = await periodosResponse.json();\r\n\r\n            const preguntas = preguntasData.preguntas;\r\n            const periodos = periodosData.periodos;\r\n\r\n            const propiedadSelect = document.getElementById('propiedad');\r\n            const periodoSelect = document.getElementById('periodo');\r\n            const propiedadesInput = document.getElementById('propiedades');\r\n            const cuestionarioDiv = document.getElementById('cuestionario');\r\n\r\n            propiedadSelect.addEventListener('change', function () {\r\n                actualizarPeriodos(periodos, propiedadSelect.value);\r\n                periodoSelect.dispatchEvent(new Event('change'));\r\n            });\r\n\r\n            periodoSelect.addEventListener('change', function () {\r\n                if (periodoSelect.value) {\r\n                    desplegarPreguntas(preguntas, propiedadSelect.value, periodoSelect.value);\r\n                } else {\r\n                    cuestionarioDiv.style.display = \"none\";\r\n                }\r\n            });\r\n\r\n            propiedadSelect.addEventListener('change', function () {\r\n                actualizarPropiedad(propiedadSelect.value);\r\n            });\r\n\r\n            function actualizarPeriodos(periodos, propiedadId) {\r\n                const periodosFiltrados = periodos.filter(periodo => periodo.propiedades_id == propiedadId);\r\n                const ultimoPeriodo = periodosFiltrados.reduce((max, periodo) =>\r\n                    new Date(periodo.periodo) > new Date(max.periodo) ? periodo : max, periodosFiltrados[0]);\r\n\r\n                periodoSelect.innerHTML = periodosFiltrados.map(periodo =>\r\n                    `<option value=\"${periodo.id}\">${periodo.id}</option>`).join('');\r\n\r\n                if (ultimoPeriodo) {\r\n                    periodoSelect.value = ultimoPeriodo.id;\r\n                } else {\r\n                    periodoSelect.innerHTML = '<option value=\"\" disabled selected>No hay periodos disponibles</option>';\r\n                }\r\n\r\n            }\r\n\r\n            function actualizarPropiedad(propiedadId) {\r\n                propiedadesInput.value = propiedadId;\r\n            }\r\n\r\n            function desplegarPreguntas(preguntas, propiedadId, periodoId) {\r\n                // Limpia el contenido existente del div de cuestionario\r\n                cuestionarioDiv.innerHTML = '';\r\n\r\n                // Crea un elemento de encabezado con el año actual\r\n                const header = document.createElement('h3');\r\n                header.textContent = `Evaluación MI Clima Laboral ${new Date().getFullYear()}`;\r\n                cuestionarioDiv.appendChild(header);\r\n\r\n                // Filtra las preguntas según la propiedad y el periodo seleccionados\r\n                const preguntasFiltradas = preguntas.filter(pregunta => pregunta.idpropiedades === propiedadId && pregunta.idperiodo === periodoId);\r\n\r\n                // Itera sobre las preguntas filtradas para crear los elementos HTML\r\n                preguntasFiltradas.forEach((pregunta, index) => {\r\n                    const div = document.createElement('div');\r\n                    div.classList.add('col');\r\n\r\n                    const p = document.createElement('p');\r\n                    p.classList.add('pregunta');\r\n                    p.innerHTML = `<span>${pregunta.idResultado}. </span>${pregunta.pregunta}`;\r\n                    div.appendChild(p);\r\n\r\n                    // Agrega las opciones de respuesta\r\n                    const opcionesHTML = `\r\n                    <div class=\"form-check form-check-inline\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"p${pregunta.idResultado}\" id=\"p${pregunta.idResultado}-positivo\" value=\"Positivo\" required>\r\n                        <label class=\"form-check-label\" for=\"p${pregunta.idResultado}-positivo\">Totalmente de acuerdo</label>\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"p${pregunta.idResultado}\" id=\"p${pregunta.idResultado}-positivo2\" value=\"Positivo\">\r\n                        <label class=\"form-check-label\" for=\"p${pregunta.idResultado}-positivo2\">De acuerdo</label>\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"p${pregunta.idResultado}\" id=\"p${pregunta.idResultado}-neutro\" value=\"Neutro\">\r\n                        <label class=\"form-check-label\" for=\"p${pregunta.idResultado}-neutro\">Ni en acuerdo, ni en desacuerdo</label>\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"p${pregunta.idResultado}\" id=\"p${pregunta.idResultado}-negativo\" value=\"Negativo\">\r\n                        <label class=\"form-check-label\" for=\"p${pregunta.idResultado}-negativo\">En desacuerdo</label>\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline\">\r\n                        <input class=\"form-check-input\" type=\"radio\" name=\"p${pregunta.idResultado}\" id=\"p${pregunta.idResultado}-negativo2\" value=\"Negativo\">\r\n                        <label class=\"form-check-label\" for=\"p${pregunta.idResultado}-negativo2\">Totalmente en desacuerdo</label>\r\n                    </div>\r\n                `;\r\n                    div.innerHTML += opcionesHTML;\r\n\r\n                    // Agrega el div de la pregunta al div del cuestionario\r\n                    cuestionarioDiv.appendChild(div);\r\n\r\n                    // Agrega el event listener a las opciones de respuesta\r\n                    const opciones = div.querySelectorAll('input[type=\"radio\"]');\r\n                    opciones.forEach(opcion => {\r\n                        opcion.addEventListener('change', function () {\r\n                            document.getElementById(`p${index + 1}`).value = this.value;\r\n                        });\r\n                    });\r\n                });\r\n\r\n                // Establece la visualización del cuestionario dependiendo de si hay preguntas filtradas o no\r\n                cuestionarioDiv.style.display = preguntasFiltradas.length > 0 ? \"block\" : \"none\";\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error al cargar datos:', error);\r\n        }\r\n    }\r\n    document.getElementById('formulario-encuesta').addEventListener('submit', function (event) {\r\n        event.preventDefault(); // Evita que el formulario se envíe de forma predeterminada\r\n\r\n        // Verifica si todas las preguntas han sido respondidas\r\n        const preguntas = document.querySelectorAll('#cuestionario input[type=\"radio\"]');\r\n\r\n        // Comprobar si hay alguna pregunta sin respuesta\r\n        const todasRespondidas = Array.from(preguntas).every(radio => {\r\n            const nombrePregunta = radio.name; // Obtener el nombre de la pregunta\r\n            return document.querySelector(`input[name=\"${nombrePregunta}\"]:checked`) !== null; // Verificar si está seleccionada\r\n        });\r\n\r\n        if (!todasRespondidas) {\r\n            alert('Por favor, responda todas las preguntas.'); // Alerta si falta alguna respuesta\r\n            return; // Evita el envío del formulario\r\n        }\r\n\r\n        // Recopila los datos del formulario\r\n        const formData = new FormData(this);\r\n\r\n        // Envía los datos al servidor utilizando AJAX\r\n        fetch('/encuesta', {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    console.log('Datos enviados correctamente');\r\n                    window.location.href = '/respuestas-enviadas'; // Redirige a una página de éxito\r\n                } else {\r\n                    console.error('Error al enviar datos');\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error de red al enviar datos:', error);\r\n            });\r\n    });\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","/*! modernizr 3.6.0 (Custom Build) | MIT *\r\n * https://modernizr.com/download/?-webp-setclasses !*/\r\n !function(e,n,A){function o(e,n){return typeof e===n}function t(){var e,n,A,t,a,i,l;for(var f in r)if(r.hasOwnProperty(f)){if(e=[],n=r[f],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(A=0;A<n.options.aliases.length;A++)e.push(n.options.aliases[A].toLowerCase());for(t=o(n.fn,\"function\")?n.fn():n.fn,a=0;a<e.length;a++)i=e[a],l=i.split(\".\"),1===l.length?Modernizr[l[0]]=t:(!Modernizr[l[0]]||Modernizr[l[0]]instanceof Boolean||(Modernizr[l[0]]=new Boolean(Modernizr[l[0]])),Modernizr[l[0]][l[1]]=t),s.push((t?\"\":\"no-\")+l.join(\"-\"))}}function a(e){var n=u.className,A=Modernizr._config.classPrefix||\"\";if(c&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp(\"(^|\\\\s)\"+A+\"no-js(\\\\s|$)\");n=n.replace(o,\"$1\"+A+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+A+e.join(\" \"+A),c?u.className.baseVal=n:u.className=n)}function i(e,n){if(\"object\"==typeof e)for(var A in e)f(e,A)&&i(A,e[A]);else{e=e.toLowerCase();var o=e.split(\".\"),t=Modernizr[o[0]];if(2==o.length&&(t=t[o[1]]),\"undefined\"!=typeof t)return Modernizr;n=\"function\"==typeof n?n():n,1==o.length?Modernizr[o[0]]=n:(!Modernizr[o[0]]||Modernizr[o[0]]instanceof Boolean||(Modernizr[o[0]]=new Boolean(Modernizr[o[0]])),Modernizr[o[0]][o[1]]=n),a([(n&&0!=n?\"\":\"no-\")+o.join(\"-\")]),Modernizr._trigger(e,n)}return Modernizr}var s=[],r=[],l={_version:\"3.6.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var A=this;setTimeout(function(){n(A[e])},0)},addTest:function(e,n,A){r.push({name:e,fn:n,options:A})},addAsyncTest:function(e){r.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=l,Modernizr=new Modernizr;var f,u=n.documentElement,c=\"svg\"===u.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;f=o(e,\"undefined\")||o(e.call,\"undefined\")?function(e,n){return n in e&&o(e.constructor.prototype[n],\"undefined\")}:function(n,A){return e.call(n,A)}}(),l._l={},l.on=function(e,n){this._l[e]||(this._l[e]=[]),this._l[e].push(n),Modernizr.hasOwnProperty(e)&&setTimeout(function(){Modernizr._trigger(e,Modernizr[e])},0)},l._trigger=function(e,n){if(this._l[e]){var A=this._l[e];setTimeout(function(){var e,o;for(e=0;e<A.length;e++)(o=A[e])(n)},0),delete this._l[e]}},Modernizr._q.push(function(){l.addTest=i}),Modernizr.addAsyncTest(function(){function e(e,n,A){function o(n){var o=n&&\"load\"===n.type?1==t.width:!1,a=\"webp\"===e;i(e,a&&o?new Boolean(o):o),A&&A(n)}var t=new Image;t.onerror=o,t.onload=o,t.src=n}var n=[{uri:\"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=\",name:\"webp\"},{uri:\"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==\",name:\"webp.alpha\"},{uri:\"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA\",name:\"webp.animation\"},{uri:\"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\",name:\"webp.lossless\"}],A=n.shift();e(A.name,A.uri,function(A){if(A&&\"load\"===A.type)for(var o=0;o<n.length;o++)e(n[o].name,n[o].uri)})}),t(),a(s),delete l.addTest,delete l.addAsyncTest;for(var p=0;p<Modernizr._q.length;p++)Modernizr._q[p]();e.Modernizr=Modernizr}(window,document);"]}